<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.user.mapper.AdminMapper">

	<!-- 회원 리스트 가져오기 -->
	<select id="selectAllUserAdmin" resultType="User">
		select * from member order by indate desc
	</select>
	
	<!-- 페이징 처리된 약속 예약 정보 리스트 부르기 -->
	<select id="selectAllUserAdmin_paging" resultType="User"
	parameterType="hashmap">
		select * 
		from(
		select member.*, row_number() over(order by indate desc) mn
		from member
		) where
		mn between #{start} and #{end}
		order by indate desc
	</select>
	
	<!-- idx로 회원정보 가져오기 -->
	<select id="selectUserByIdx" parameterType="string" resultType="User">
		select * from member where idx=#{idx}
	</select>
	
	<!-- idx로 해당 회원이 등록한 약속수 가져오기 -->
	<select id="selectYaksokCountOfUser" parameterType="string" resultType="int">
		select count(*) from yaksok where idx=#{idx}
	</select>
	
	<!-- idx와 mstate로 해당 회원의 회원상태 변경하기 -->
	<select id="editUserMstateAdmin" parameterType="hashmap">
		update member set mstate=#{mstate} where idx=#{idx}
	</select>
</mapper>